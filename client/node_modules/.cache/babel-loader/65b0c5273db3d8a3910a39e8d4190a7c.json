{"ast":null,"code":"var _jsxFileName = \"/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikePost/LikePost.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { fetchFavorites, increaseLike, decreaseLike } from '../../actions';\nimport AuthContext from '../../AuthContext';\n\nconst LikePost = ({\n  id,\n  idx\n}) => {\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n  const {\n    username,\n    favorites,\n    allPosts,\n    postLiked,\n    postDisliked\n  } = state;\n  const [values, setValues] = useState({\n    id\n  });\n  const [liked, setLiked] = useState(prevState => ({\n    [idx]: prevState\n  }));\n  useEffect(() => {\n    fetchFavorites(username, dispatch).then(res => {\n      const prevLiked = res.findIndex(fav => fav == id) > -1;\n      console.log(prevLiked);\n      setLiked({\n        [idx]: prevLiked\n      });\n      console.log(liked);\n    });\n  }, [username, allPosts, postLiked, postDisliked]);\n\n  const handleClick = async () => {\n    console.log(liked);\n    console.log(idx);\n    console.log(favorites);\n    const prevLiked = (await favorites.findIndex(fav => fav == id)) > -1;\n\n    if (prevLiked == true) {\n      console.log(\"like decreased\");\n      await decreaseLike(id, username, dispatch);\n      setLiked({\n        [idx]: true\n      });\n      dispatch({\n        type: \"POST_DISLIKED\",\n        payload: true\n      });\n    } else {\n      console.log(\"like increased\");\n      await increaseLike(id, username, dispatch);\n      setLiked({\n        [idx]: false\n      });\n      dispatch({\n        type: \"POST_LIKED\",\n        payload: true\n      });\n    }\n\n    console.log(liked);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, liked[idx] ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 28\n    }\n  }, \"Unlike Post\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 82\n    }\n  }, \"Like Post\"));\n};\n\nexport default LikePost;","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikePost/LikePost.js"],"names":["React","useContext","useEffect","useState","fetchFavorites","increaseLike","decreaseLike","AuthContext","LikePost","id","idx","state","dispatch","username","favorites","allPosts","postLiked","postDisliked","values","setValues","liked","setLiked","prevState","then","res","prevLiked","findIndex","fav","console","log","handleClick","type","payload"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport {fetchFavorites,increaseLike,decreaseLike} from '../../actions'\nimport AuthContext from '../../AuthContext'\n\nconst LikePost = ({id,idx}) => {\n    const {state,dispatch} = useContext(AuthContext)\n    const {username,favorites,allPosts,postLiked,postDisliked} = state;\n    const [values,setValues] = useState({id})\n    const [liked,setLiked] = useState(prevState => ({[idx]:prevState}))\n    \n    useEffect(()=>{\n        fetchFavorites(username,dispatch).then(res => {\n            const prevLiked = res.findIndex(fav => fav == id) > -1;\n            console.log(prevLiked)\n            setLiked({[idx]:prevLiked})\n            console.log(liked)\n        })\n    },[username,allPosts,postLiked,postDisliked])\n    \n    const handleClick = async() => {\n        console.log(liked)\n        console.log(idx)\n        console.log(favorites)\n        const prevLiked = await favorites.findIndex(fav => fav == id) > -1;\n        if(prevLiked == true){\n            console.log(\"like decreased\")\n            await decreaseLike(id,username,dispatch)\n            setLiked({[idx]:true})\n            dispatch({type:\"POST_DISLIKED\",payload:true})\n        } else{\n            console.log(\"like increased\")\n            await increaseLike(id,username,dispatch)\n            setLiked({[idx]:false})\n            dispatch({type:\"POST_LIKED\",payload:true})\n        }\n        console.log(liked)\n    }\n        \n    \n    return (\n        <div>\n            {liked[idx] ? (<button onClick={handleClick}>Unlike Post</button>): (<button onClick={handleClick}>Like Post</button>)}\n        </div>\n    )\n}\n\nexport default LikePost\n"]},"metadata":{},"sourceType":"module"}