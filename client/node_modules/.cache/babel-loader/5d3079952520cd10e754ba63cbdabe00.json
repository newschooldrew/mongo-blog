{"ast":null,"code":"var _jsxFileName = \"/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikeComment/LikeComment.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { fetchFavorites, increaseCommentLike, decreaseCommentLike } from '../../actions';\nimport AuthContext from '../../AuthContext';\nimport update from 'react-addons-update';\n\nconst LikeComment = ({\n  sub,\n  comment_id,\n  post_id,\n  idx,\n  liked\n}) => {\n  const {\n    state,\n    dispatch,\n    allPosts\n  } = useContext(AuthContext);\n  const {\n    username,\n    favorites,\n    commentLiked,\n    commentDisliked\n  } = state;\n  const [values, setValues] = useState({\n    post_id,\n    comment_id,\n    [idx]: false\n  });\n  useEffect(async () => {\n    console.log(liked);\n    console.log(state);\n    await fetchFavorites(values.post_id, values.comment_id, username, dispatch);\n  }, [username, allPosts, commentLiked, commentDisliked]);\n\n  const checkLiked = () => {\n    const isLiked = favorites.findIndex(fav => fav == comment_id) > -1;\n    console.log(isLiked);\n    return isLiked;\n  };\n\n  const handleCommentClick = e => {\n    const {\n      id\n    } = e.target;\n    const prevLiked = favorites.findIndex(fav => fav == id) > -1;\n    console.log(\"prevLiked:\");\n    console.log(prevLiked);\n\n    if (prevLiked == true) {\n      console.log(\"previously liked\");\n      decreaseCommentLike(values.post_id, values.comment_id, username, dispatch);\n    } else {\n      console.log(\"not previously liked\");\n      increaseCommentLike(values.post_id, values.comment_id, username, dispatch);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, !checkLiked ? /*#__PURE__*/React.createElement(\"button\", {\n    id: sub._id,\n    onClick: e => handleCommentClick(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 29\n    }\n  }, \"Like Comment\") : /*#__PURE__*/React.createElement(\"button\", {\n    id: sub._id,\n    onClick: handleCommentClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 113\n    }\n  }, \"Unlike Comment\"));\n};\n\nexport default LikeComment;","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikeComment/LikeComment.js"],"names":["React","useContext","useEffect","useState","fetchFavorites","increaseCommentLike","decreaseCommentLike","AuthContext","update","LikeComment","sub","comment_id","post_id","idx","liked","state","dispatch","allPosts","username","favorites","commentLiked","commentDisliked","values","setValues","console","log","checkLiked","isLiked","findIndex","fav","handleCommentClick","e","id","target","prevLiked","_id"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport {fetchFavorites,increaseCommentLike,decreaseCommentLike} from '../../actions'\nimport AuthContext from '../../AuthContext'\nimport update from 'react-addons-update'\n\nconst LikeComment = ({sub,comment_id,post_id,idx,liked}) => {\n    const {state,dispatch,allPosts} = useContext(AuthContext)\n    const {username,favorites,commentLiked,commentDisliked} = state;\n    const [values,setValues] = useState({post_id,comment_id,[idx]:false})\n\n    useEffect(async ()=>{\n        console.log(liked)\n        console.log(state)\n        await fetchFavorites(values.post_id,values.comment_id,username,dispatch)\n    },[username,allPosts,commentLiked,commentDisliked])\n    \n    const checkLiked = () =>{\n        const isLiked = favorites.findIndex(fav => fav == comment_id) > -1;\n        console.log(isLiked)\n        return isLiked\n    } \n    \n    const handleCommentClick = e =>{\n        const {id} = e.target;\n\n        const prevLiked = favorites.findIndex(fav => fav == id) > -1;\n        console.log(\"prevLiked:\")\n        console.log(prevLiked)\n        if(prevLiked == true){\n            console.log(\"previously liked\")\n            decreaseCommentLike(values.post_id,values.comment_id,username,dispatch)\n        } else{\n            console.log(\"not previously liked\")\n            increaseCommentLike(values.post_id,values.comment_id,username,dispatch)\n        }\n    }\n\n    return (\n        <div>\n            {!checkLiked ? (<button id={sub._id} onClick={e => handleCommentClick(e)}>Like Comment</button>) : (<button id={sub._id} onClick={handleCommentClick}>Unlike Comment</button>)}\n        </div>\n    )\n}\n\nexport default LikeComment\n"]},"metadata":{},"sourceType":"module"}