{"ast":null,"code":"var _jsxFileName = \"/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikeComment/LikeComment.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { findLikeNumber, increaseCommentLike, decreaseCommentLike, fetchFavorites } from '../../actions';\nimport AuthContext from '../../AuthContext';\nimport update from 'react-addons-update';\n\nconst LikeComment = ({\n  sub,\n  comment_id,\n  post_id,\n  idx,\n  liked,\n  favorites\n}) => {\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n  const {\n    username\n  } = state;\n  const [values, setValues] = useState({\n    post_id,\n    comment_id,\n    [idx]: liked\n  });\n  useEffect(() => {\n    console.log(liked);\n    console.log(favorites);\n  }, [username, favorites]);\n\n  const handleCommentClick = e => {\n    console.log(favorites); // const new_favorites = Object.values(favorites)\n    // console.log(new_favorites)\n\n    console.log(e.target.id);\n    const my_id = e.target.id;\n    console.log(\"like:\");\n    console.log(liked); // const foundFav = favorites.findIndex(fav => fav._id === my_id);\n    // console.log(\"foundFav:\")\n    // console.log(foundFav)\n\n    setValues({ ...values,\n      [idx]: liked\n    });\n    handleCommentLike(increaseCommentLike, decreaseCommentLike, values, username, dispatch);\n  };\n\n  const handleCommentLike = async (increaseFunction, decreaseFunction, values, name, redux) => {\n    console.log(\"values:\");\n    console.log(values);\n    console.log(values[idx]);\n    await increaseFunction(values.post_id, values.comment_id, name, redux);\n\n    if (values[idx] === true) {\n      console.log(\"increase function hit\");\n    } else {\n      console.log(\"decrease function hit\"); // await decreaseFunction(values.post_id,values.comment_id,username)\n    }\n\n    dispatch({\n      type: \"COMMENT_LIKED\"\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, !liked ? /*#__PURE__*/React.createElement(\"button\", {\n    id: sub._id,\n    onClick: e => handleCommentClick(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 24\n    }\n  }, \"Like Comment\") : /*#__PURE__*/React.createElement(\"button\", {\n    id: sub._id,\n    onClick: handleCommentClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 108\n    }\n  }, \"Unlike Comment\"));\n};\n\nexport default LikeComment;","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/july_projects/mongo-blog/client/src/components/LikeComment/LikeComment.js"],"names":["React","useContext","useEffect","useState","findLikeNumber","increaseCommentLike","decreaseCommentLike","fetchFavorites","AuthContext","update","LikeComment","sub","comment_id","post_id","idx","liked","favorites","state","dispatch","username","values","setValues","console","log","handleCommentClick","e","target","id","my_id","handleCommentLike","increaseFunction","decreaseFunction","name","redux","type","_id"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport {findLikeNumber,increaseCommentLike,decreaseCommentLike,fetchFavorites} from '../../actions'\nimport AuthContext from '../../AuthContext'\nimport update from 'react-addons-update'\n\nconst LikeComment = ({sub,comment_id,post_id,idx,liked,favorites}) => {\n    const {state,dispatch} = useContext(AuthContext)\n    const {username} = state;\n    const [values,setValues] = useState({post_id,comment_id,[idx]:liked})\n\n    useEffect(()=>{\n        console.log(liked)\n        console.log(favorites)\n    },[username,favorites])\n    \n    const handleCommentClick = e =>{\n        console.log(favorites)\n        // const new_favorites = Object.values(favorites)\n        // console.log(new_favorites)\n        console.log(e.target.id)\n        const my_id = e.target.id;\n        console.log(\"like:\")\n        console.log(liked)\n        // const foundFav = favorites.findIndex(fav => fav._id === my_id);\n        // console.log(\"foundFav:\")\n        // console.log(foundFav)\n        setValues({\n            ...values,\n            [idx]:liked\n        })\n        handleCommentLike(increaseCommentLike,decreaseCommentLike,values,username,dispatch)\n    }\n\n    const handleCommentLike = async (increaseFunction,decreaseFunction,values,name,redux) =>{\n        console.log(\"values:\")\n        console.log(values)\n        console.log(values[idx])\n        await increaseFunction(values.post_id,values.comment_id,name,redux)\n        if(values[idx] === true){\n            console.log(\"increase function hit\")\n        } else{\n            console.log(\"decrease function hit\")\n            // await decreaseFunction(values.post_id,values.comment_id,username)\n        }\n        dispatch({type:\"COMMENT_LIKED\"})\n    }\n\n    return (\n        <div>\n            {!liked ? (<button id={sub._id} onClick={e => handleCommentClick(e)}>Like Comment</button>) : (<button id={sub._id} onClick={handleCommentClick}>Unlike Comment</button>)}\n        </div>\n    )\n}\n\nexport default LikeComment\n"]},"metadata":{},"sourceType":"module"}